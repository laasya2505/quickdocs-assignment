{% extends "base.html" %}

{% block title %}Customers - QuickDocs{% endblock %}

{% block content %}
<h1>Customer Registration</h1>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
    <div>
        <h2>Add New Customer</h2>
        <form method="POST" action="{{ url_for('add_customer') }}">
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label for="phone">Phone:</label>
                <input type="tel" id="phone" name="phone" required>
            </div>
            
            <div class="form-group">
                <label for="process_id">Assign to Process (Optional):</label>
                <select id="process_id" name="process_id">
                    <option value="">-- Select Process --</option>
                    {% for process in processes %}
                    <option value="{{ process.id }}">{{ process.name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <button type="submit">Add Customer</button>
        </form>
    </div>
    
    <div>
        <h2>All Customers</h2>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Registration Date</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for customer in customers %}
                <tr>
                    <td>{{ customer.name }}</td>
                    <td>{{ customer.email }}</td>
                    <td>{{ customer.phone }}</td>
                    <td>{{ customer.registration_date[:10] if customer.registration_date else 'N/A' }}</td>
                    <td>
                        <a href="{{ url_for('edit_customer', customer_id=customer.id) }}" 
                           style="background: #3498db; color: white; padding: 5px 10px; text-decoration: none; border-radius: 3px; font-size: 12px;">
                           Edit
                        </a>
                        <a href="{{ url_for('delete_customer', customer_id=customer.id) }}" 
                           style="background: #e74c3c; color: white; padding: 5px 10px; text-decoration: none; border-radius: 3px; font-size: 12px; margin-left: 5px;"
                           onclick="return confirm('Are you sure you want to delete this customer? This will also delete all their process assignments and document submissions.')">
                           Delete
                        </a>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="5">No customers found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<style>
/* Additional styles for better button appearance */
.action-buttons {
    display: flex;
    gap: 5px;
}

.btn-edit {
    background: #3498db;
    color: white;
    padding: 5px 10px;
    text-decoration: none;
    border-radius: 3px;
    font-size: 12px;
    transition: background-color 0.3s;
}

.btn-edit:hover {
    background: #2980b9;
}

.btn-delete {
    background: #e74c3c;
    color: white;
    padding: 5px 10px;
    text-decoration: none;
    border-radius: 3px;
    font-size: 12px;
    transition: background-color 0.3s;
}

.btn-delete:hover {
    background: #c0392b;
}
</style>
{% endblock %}
